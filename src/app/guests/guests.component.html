<div class="guests">
  <div class="guests-heading">
    <span>Manage Ticket</span>
  </div>
  <div class="guests-container">
    <!-- <div class="guests-list">
      <div class="guests-list-title">
        <span>List Ticket</span>
      </div>
      <ul>
        <li *ngFor="let guest of guests">
          <a routerLink="/detail/{{ guest.id }}">
            <span class="badge">{{ guest.id }}</span> {{ guest.name }}
          </a>
          <button
            type="button"
            class="delete"
            title="delete guest"
            (click)="delete(guest)"
          >
            x
          </button>
        </li>
      </ul>
    </div> -->
    <div>
      <app-guest-form
        (isClickSubmit)="clickSubmit($event)"
        [foods]="foods"
      ></app-guest-form>
    </div>
  </div>
  <div class="container">
    <!-- <div class="row">
      <div class="col"> -->
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Order</th>
          <th>Sub Order</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <ng-template ngFor let-guest [ngForOf]="guests" let-idx="index">
          <tr [class.active]="idx === activateIndex" (click)="onClickRow(idx)">
            <td>{{ guest.id }}</td>
            <td>{{ guest.name }}</td>
            <ng-template [ngIf]="guest.order * 1 >= 1" [ngIfElse]="elseOrder"
              ><ng-template ngFor let-food [ngForOf]="foods">
                <td *ngIf="food.id == guest.order">{{ food.name }}</td>
              </ng-template></ng-template
            >
            <ng-template #elseOrder
              ><td>
                <i>None</i>
              </td></ng-template
            >
            <ng-template
              [ngIf]="guest.subOrder * 1 >= 1"
              [ngIfElse]="elseSubOrder"
            >
              <ng-template ngFor let-food [ngForOf]="foods">
                <td *ngIf="food.id == guest.subOrder">
                  {{ food.name }}
                </td>
              </ng-template>
            </ng-template>
            <ng-template #elseSubOrder
              ><td>
                <i>None</i>
              </td></ng-template
            >
            <td>
              <div class="row">
                <button class="btn-edit">
                  <a routerLink="/detail/{{ guest.id }}">Edit</a>
                </button>
                <button class="btn-remove" (click)="delete(guest)">
                  Remove
                </button>
              </div>
            </td>
          </tr>
        </ng-template>
        <ng-template [ngIf]="isLoading">
          <app-loading></app-loading>
        </ng-template>
      </tbody>
    </table>
    <!-- </div>
    </div> -->
  </div>
</div>
